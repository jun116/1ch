<!DOCTYPE html>
<html lang="ja" ng-app="1ch">
<head>
  <meta charset="utf-8">
  <title>1ch</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="stylesheets/app.css">
  <link rel="stylesheet" href="stylesheets/bootstrap.css">
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0px; padding: 0px }
    #map_canvas { height: 100% }
  </style>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular-resource.min.js"></script>
  <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <script src="javascripts/app.js"></script>
  <script src="javascripts/controllers.js"></script>
  <script src="javascripts/services.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    $(function(){
      if (!navigator.geolocation) {
        alert("位置情報サービスが使えないZ〜");
        return;
      }

      Maps.geolocation();
    });
    var Maps = {
      geolocation: function(){

        navigator.geolocation.watchPosition(
          function(position){
            console.log(position.coords.latitude);
            console.log(position.coords.longitude);
            console.log(position.coords.altitude);
            console.log(position.coords.accuracy);
            console.log(position.coords.heading);
            console.log(position.coords.speed);
            Maps.show(position);
          }, 
          function(err){
            console.log(err);
          }
        );
      },

      show: function(position){
        var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        var options = {
          zoom: 18,
          disableDefaultUI: true,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            options);
        var marker = new google.maps.Marker({
          position: latlng, 
          icon: 'images/bluedot.png',
          map: map, 
          title:"Hello World!",
        });   
      },
    }
  </script>
</head>
<body>
  <div ng-view></div>
</body>
</html>
